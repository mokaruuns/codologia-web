# Тема: PHP

## Проверка домашнего задания

## Что такое PHP

PHP - язык программирования, который позволяет создавать динамические веб-страницы. PHP - это скриптовый язык, который
выполняется на сервере.

Что такое язык программирования? Язык программирования - это набор команд, которые позволяют компьютеру выполнять
какие-то действия. Например, в языке C есть команда `printf`, которая позволяет вывести на экран какой-то текст. В языке
Python есть команда `print`, которая делает то же самое.

## Как работает PHP

PHP - это скриптовый язык, который выполняется на сервере. Когда пользователь заходит на сайт, сервер получает запрос от
браузера. Сервер обрабатывает запрос, и в зависимости от запроса, сервер может отдать пользователю какую-то страницу,
или обработать какие-то данные, которые пользователь отправил на сервер.

Для того чтобы сервер мог обрабатывать запросы, на сервере должен быть установлен PHP.

## Как установить PHP

### Windows

Для того чтобы установить PHP на Windows, нужно скачать установщик с официального
сайта: https://windows.php.net/download

### Linux

Для того чтобы установить PHP на Linux, нужно выполнить команду:

```bash
sudo apt-get install php
```

---

## Практическая работа

### Полезное

#### Переменные

В php переменные объявляются с помощью знака `$`. Переменные могут содержать только буквы, цифры и знак подчеркивания.

```php
$my_var = 10;
$my_var = 'Hello world';
$my_var = true;
$my_var = 10.5;
```

#### Массивы

Массивы в php представляют собой набор элементов, которые хранятся в переменной. Массивы в php могут быть ассоциативными
или индексированными.

##### Ассоциативные массивы

Ассоциативные массивы в php представляют собой набор элементов, которые хранятся в переменной. Каждый элемент массива
имеет ключ и значение. Ключи могут быть только строками.

```php
$my_array = [
    'key1' => 'value1',
    'key2' => 'value2',
    'key3' => 'value3',
];
```

##### Индексированные массивы

Индексированные массивы в php представляют собой набор элементов, которые хранятся в переменной. Каждый элемент массива
имеет только значение. Ключи могут быть только числами.

```php
$my_array = [
    'value1',
    'value2',
    'value3',
];
```

#### Вывод данных

Для того чтобы вывести данные на экран, нужно использовать функцию `echo`.

```php
echo 'Hello world';
```

Если нужно вывести переменную, то нужно использовать конструкцию `echo $my_var`.

```php
$my_var = 'Hello world';
echo $my_var;
```

Если нужно вывести элемент из массива, то нужно использовать конструкцию `echo $my_array['key']`.

```php 
$my_array = [
    'key1' => 'value1',
    'key2' => 'value2',
    'key3' => 'value3',
];
echo $my_array['key1'];
```

#### Условные операторы

##### if

Условный оператор `if` позволяет выполнять код только в том случае, если условие истинно.

```php

if (условие) {
    // код
}

```

##### if else

Условный оператор `if else` позволяет выполнять код в зависимости от того, истинно ли условие.

В скобочках мы указываем условие, которое должно быть истинно, чтобы выполнился код внутри блока `if`.
Например, в скобкам может быть: `$a > $b`, `$a < $b`, `$a == $b`, `$a != $b`, `$a >= $b`, `$a <= $b`.

```php
if (условие) {
    // код
} else {
    // код
}

```

#### Сравнение

Для сравнения используются следующие операторы:

* `==` - равно
* `!=` - не равно
* `>` - больше
* `<` - меньше
* `>=` - больше или равно
* `<=` - меньше или равно

```php
$my_var = 1;
if ($my_var == 1) {
    echo 'my_var равно 1';
} else {
    echo 'my_var не равно 1';
}
```

Можно сочетать сравнения с помощью логических операторов:

* `&&` - и
* `||` - или
* `!` - не

```php
$my_var = 1;
if ($my_var > 0 && $my_var < 10) {
    echo 'my_var больше 0 и меньше 10';
} else {
    echo 'my_var не больше 0 и не меньше 10';
}
```

### Задание 1 - создание простого скрипта с выводом текста

- Откройте редактор кода в своей папке
- Создайте внутри папку для сегодняшнего дня
- Создайте внутри папки файл `index.php`

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Form</title>
</head>
<body>
<form method="POST">
    <label for="login">Name</label>
    <input id="login" type="text" name="login">
    <label for="password">Password</label>
    <input id="password" type="password" name="password">
    <input type="submit" value="Войти">
</form>
</body>
<?php
        echo "Hello world!";
    ?>
</html>
```

- Теперь вставьте этот файл в папку с сайтом на сервере
- Теперь откройте в браузере страницу `http://194.87.98.26/fish_site/<ваша папка>/index.php`
- Посмотрите, что выведется на экран помимо формы

Только что мы вставили в наш сайт файл `index.php`, который содержит PHP код. Когда пользователь открывает эту страницу,
сервер выполняет этот PHP код, и выводит результат на экран.

### Задание 2 - создание простого скрипта с формой

- Теперь в той же папке создайте файл `form.php`
- Вставьте в него следующий код:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Form</title>
</head>
<body>
<form method="POST">
    <label for="login">Name</label>
    <input id="login" type="text" name="login">
    <label for="password">Password</label>
    <input id="password" type="password" name="password">
    <input type="submit" value="Войти">
</form>
</body>
<?php
        if (isset($_POST['login']) && isset($_POST['password'])) {
            echo "Hello, " . $_POST['login'] . "!";
        }
    ?>
</html>
```

- Теперь вставьте этот файл в папку с сайтом на сервере
- Теперь откройте в браузере страницу `http://194.87.98.26/fish_site/<ваша папка>/form.php`
- Посмотрите, что выведется на экран помимо формы

Что произошло? Мы создали форму, которая отправляет данные на сервер. После этого мы проверяем, есть ли в запросе
переменные `login` и `password`. Если они есть, то выводим на экран сообщение `Hello, <login>!`.

### Задание 3 - создание простого скрипта с формой и записью в файл

- Теперь в той же папке создайте файл `form_file.php`
- Весь код за исключением `<?php` и `?>` скопируйте из предыдущего файла
- А внутри `<?php` и `?>` вставьте следующий код:

```
if (isset($_POST['login']) && isset($_POST['password'])) {
    $file = fopen("users.txt", "a");
    fwrite($file, $_POST['login'] . " " . $_POST['password'] . "\n");
    fclose($file);
}
```

- Теперь вставьте этот файл в папку с сайтом на сервере
- Создайте файл `users.txt` в той же папке
- Измените права на файл `users.txt` так, чтобы любой пользователь мог читать и писать в этот файл
    - `chmod 666 users.txt`
- Теперь откройте соответствующую страницу в браузере
- Введите логин и пароль
- Проверьте, что в файле `users.txt` появилась новая строка
- Попробуйте ввести еще один логин и пароль
- Проверьте, что в файле `users.txt` появилась новая строка

## Дополнительные материалы

- Команда `chmod` позволяет изменить права на файл. Подробнее о ней можно
  почитать [здесь](https://ru.wikipedia.org/wiki/Chmod)

## Домашнее задание

Сначала работаем на [replit.com](https://replit.com/languages/php)

### Подготовка

1. Создайте массив, который будет имитировать данные POST с нашего сайта
    ```
    $_POST = array(
      "login" => "Марсель",
      "password" => "qwerty123"
    );
    ```
2. Проверьте, есть ли у вас вообще такие данные
    ```
    if (isset($_POST["login"]) && isset($_POST["password"])) {
        # вот тут вы уже будете писать код, когда убедитесь, что логин и пароль
        # уже есть в массиве $_POST
    }
    ```
3. Выведите значение логина и пароля (команда `echo`)

### Сами задания

1. Вам нужно написать часть программы, которая сравнивает логин и пароль,
   и выводит предупреждение, если они одинаковые
2. Теперь сделайте запись логина и пароля в файл. Для этого можно глянуть задания,
   которые мы выполняли в классе.
3. Сделать возрастную проверку
    1. В $_POST задайте ещё данные `age`, где будет храниться возраст пользователя.
    2. Сделайте условие проверки, при котором, если пользователю меньше 18 лет, то ему выведется предупреждение, что он
       не может самостоятельно зарегистрироваться
    3. Для этого используйте `if`, `echo`

### Полезные ссылки

1. [replit.com](https://replit.com/languages/php)
2. [Условия if в PHP](https://php.zone/kurs-php-dlya-nachinayushih/usloviya-v-php)
3. [Справка chmod](https://ru.hostings.info/termins/chmod.html)
